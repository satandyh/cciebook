---
description: 'Цикл 17, Тема 97: OSPF'
---

# Лабораторная по теме

{% file src="../../.gitbook/assets/lab097.zip" caption="Начальная конфигурация" %}

1. Загрузить начальную конфигурацию всех устройств.
2. Для задания используется логическая и физическая топологии проекта.
3. На маршрутизаторах R1, R2, R3, R4, R5 настроить OSPF процесс 100 в Аrea 51 на следующих интерфейсах:
   1. R2- E0/1.12,E0/1.23, E0/1.235,Loopback 0
   2. R3- E0/1.34, E0/1.23, E0/1.235,Loopback 0
   3. R4-E0/1.34, Loopback 0
   4. R5- E0/1.235, Loopback 0
   5. R1 — настроить одной командой
4. На маршрутизаторах R7, R8, R9, R10 настроить OSPF процесс 100 в Аrea 107 на на следующих интерфейсах:
   1. R7- E0/1.78, Loopback 0
   2. R8, R9, R10 -настроить одной командой
5. Настроить DMVPN Phase 2 следующим образом:
   1. Настроить маршрутизатор R7 в качестве хаба DMVPN:
      1. Настроить интерфейс Tunnel0:
         1. IP адрес — 188.1.100.7/24
         2. Аутентификация NHRP — LSAOPTIM
         3. Настроить динамическую поддержку мультикаста
         4. NHRP ID — 100
         5. Источник — интерфейс Ethernet 0/1.144
         6. Режим — GRE Multipoint
         7. Ключ туннеля 10000
         8. Настроить OSPF процесс 100 в Аrea 72 с типом сети, при которой Hello пакеты отправляются Broadcast’ом.
   2. Настроить маршрутизаторы R2, R3, R4, R6 качеcтве Spok’ов:
      1. Настроить интерфейс Tunnel0:
         1. IP адрес — использовать Overlay адрес топологии
         2. Аутентификация NHRP — LSAOPTIM
         3. Настроить динамическую поддержку мультикаста
         4. NHRP ID — 100
         5. В качестве сервера NHRP указать R7
         6. Источник — интерфейс Ethernet 0/1.144
         7. Ключ туннеля 10000
         8. Настроить OSPF процесс 100 в Аrea 72 с типом сети, при которой Hello пакеты отправляются Broadcast’ом при этом Spok’и не должны участвовать в выборах DR.
6. На R6 настроить статические маршруты следующим образом:
   1. маршрут по-умолчанию, в качестве Next Hop интерфейс Null0
   2. статический маршрут к IP адресу Loopback интерфейса R4. В качестве Next Hop указать интерфейс E0/1.456 R6
   3. статический маршрут к IP адресу Loopback интерфейса R5. В качестве Next Hop указать интерфейс E0/1.456 R6
   4. статический маршрут к IP адресу Loopback интерфейса R7. В качестве Next Hop указать IP адрес интерфейса E0/1.67 R7
7. На маршрутизаторе R6 настроить внешний BGP процесс следующим образом:
   1. Номер AS — 1.6
   2. Создать ebgp сессию следующим образом:
      1. Настроить Peer Group под названием LSA:
         1. Использовать Loopback интерфейс в качестве Update Source
         2. Внести в Peer Group соседей их IP адреса интерфейсов Loopback0
         3. Позволить увеличение значения TTL только до 2 хопов
         4. Настроить распространение маршрута по-умолчанию не используя команду redistribute.
8. На маршрутизаторах R4, R5, R7 настроить внешний BGP процесс следующим образом:
   1. Номер AS — 4, 5, 1.7 — соответственно
   2. Создать ebgp сессию с R6 следующим образом:
      1. Использовать Loopback0 интерфейс в качестве Update Source
      2. Указать в качестве Remote As номер AS 1.6
      3. Позволить увеличение значения TTL только до 2 хопов
9. На R7 в OSPF процесс 100 адвертайзить маршрут по-умолчанию
10. На R7 настроить статический маршрут к IP адресу Loopback интерфейса R6. В качестве Next Hop указать IP адрес интерфейса E0/1.67 R6
11. На R4 в OSPF процесс 100 адвертайзить маршрут по-умолчанию всегда с метрикой 10.
12. На R4 настроить статический маршрут к IP адресу Loopback интерфейса R6. В качестве Next Hop указать IP адрес интерфейса E0/1.456 R6
13. На всех маршрутизаторах настроить оптимизацию OSPF процесса следующим образом:
    1. Throttle таймер для SPF алгоритма со следующими значениями:
       1. Таймер начальной задержки калькуляции SPF в 5 секунд
       2. Hold таймер между двумя SPF калькуляциями 10 секунд
       3. Таймер максимального ожидания 90 секунд
    2. Pacing таймер со следующими значениями:
       1. Groupe таймер 75 сек
       2. Таймер ретрансмиссии 100 мсек
       3. Таймер флдудинга 50 мсек
14. На интрефейсах Tunnel0 маршрутизаторов R2, R3, R4, R6, R7 настроить Fast Hello c отправкой Hello 5 пакетов в секунду

{% file src="../../.gitbook/assets/lab097\_answers.zip" caption="Конечная конфигурация" %}

